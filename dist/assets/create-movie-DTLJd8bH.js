import{a as h,j as e,T as f,z as i,M as g,B as x,v as b}from"./TextField-C0C35B0s.js";import{D as j,C as v,a as y,b as C,H as _}from"./admin-BtXtYjBH.js";import{S as T}from"./Stack-DDPYJlOQ.js";import{S}from"./Snackbar-DD-lInE4.js";import{A as W}from"./Alert-B1AO4k1G.js";function q(){const[a,c]=h.useState({film_name:"",film_img:"",film_trailer:"",Release_date:"",film_describe:"",age_limit:"",duration:"",film_type:"1",categories:"",directors:"",actors:""}),[n,s]=h.useState({open:!1,message:"",severity:"success"}),d=[{value:"1",label:"Đang chiếu"},{value:"2",label:"Sắp chiếu"}],m=()=>s(l=>({...l,open:!1})),r=l=>{const{name:o,value:t}=l.target;c(u=>({...u,[o]:t}))},p=async l=>{l.preventDefault();const o={...a,film_img:a.film_img.split(",").map(t=>t.trim()),categories:a.categories.split(",").map(t=>t.trim()),directors:a.directors.split(",").map(t=>t.trim()),actors:a.actors.split(",").map(t=>t.trim())};try{const t=await fetch("/api/admin/films/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!t.ok)throw new Error("Failed to create movie");const u=await t.json();console.log(u),s({open:!0,message:"Phim đã được tạo thành công!",severity:"success"})}catch(t){console.error(t),s({open:!0,message:"Có lỗi xảy ra khi tạo phim!",severity:"error"})}};return e.jsxs(j,{children:[e.jsxs(v,{children:[e.jsx(y,{title:e.jsx(f,{variant:"h2",children:"Mẫu tạo phim mới"})}),e.jsx(C,{children:e.jsxs("form",{onSubmit:p,children:[e.jsxs(T,{spacing:3,children:[e.jsx(i,{name:"film_name",label:"Tên phim",value:a.film_name,onChange:r,required:!0,fullWidth:!0}),e.jsx(i,{name:"film_img",label:"URL hình ảnh (cách nhau bởi dấu phẩy)",value:a.film_img,onChange:r,required:!0,fullWidth:!0}),e.jsx(i,{name:"film_trailer",label:"URL trailer",value:a.film_trailer,onChange:r,required:!0,fullWidth:!0}),e.jsx(i,{name:"Release_date",label:"Ngày phát hành",type:"date",InputLabelProps:{shrink:!0},value:a.Release_date,onChange:r,required:!0,fullWidth:!0}),e.jsx(i,{name:"film_describe",label:"Mô tả",value:a.film_describe,onChange:r,multiline:!0,rows:4,required:!0,fullWidth:!0}),e.jsx(i,{name:"age_limit",label:"Giới hạn độ tuổi",type:"number",value:a.age_limit,onChange:r,required:!0,fullWidth:!0}),e.jsx(i,{name:"duration",label:"Thời lượng (phút)",type:"number",value:a.duration,onChange:r,required:!0,fullWidth:!0}),e.jsx(i,{name:"film_type",label:"Trạng thái phim",select:!0,value:a.film_type,onChange:r,required:!0,fullWidth:!0,children:d.map(l=>e.jsx(g,{value:l.value,children:l.label},l.value))}),e.jsx(i,{name:"categories",label:"Thể loại (cách nhau bởi dấu phẩy)",value:a.categories,onChange:r,fullWidth:!0}),e.jsx(i,{name:"directors",label:"Đạo diễn (cách nhau bởi dấu phẩy)",value:a.directors,onChange:r,fullWidth:!0}),e.jsx(i,{name:"actors",label:"Diễn viên (cách nhau bởi dấu phẩy)",value:a.actors,onChange:r,fullWidth:!0})]}),e.jsx(x,{mt:3,display:"flex",justifyContent:"flex-end",children:e.jsx(b,{type:"submit",variant:"contained",color:"primary",children:"Tạo phim"})})]})})]}),e.jsx(S,{open:n.open,autoHideDuration:6e3,onClose:m,children:e.jsx(W,{onClose:m,severity:n.severity,children:n.message})})]})}function H(){return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsxs("title",{children:[" ","Tạo phim | Trang quản trị website bán vé xem phim NHTT"]})}),e.jsx(q,{})]})}export{H as default};
