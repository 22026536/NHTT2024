import{a as u,j as e,T as p,z as r,B as x,v as f}from"./TextField-BtRiUif7.js";import{D as j,C as g,a as y,b as w,H as C}from"./admin-DadmEWhV.js";import{S as b}from"./Stack-BfoaOI6W.js";import{S as _}from"./Snackbar-6HqTmQJK.js";import{A as v}from"./Alert-DlJiDsMq.js";function S(){const[t,c]=u.useState({film_name:"",room_name:"",cinema_name:"",show_date:"",show_time:""}),[o,i]=u.useState({open:!1,message:"",severity:"success"}),h=()=>i(n=>({...n,open:!1})),s=n=>{const{name:l,value:a}=n.target;c(m=>({...m,[l]:a}))},d=async n=>{n.preventDefault();const l={...t,show_date:t.show_date,show_time:t.show_time};try{const a=await fetch("/api/admin/showtimes/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!a.ok)throw new Error("Failed to create showtime");const m=await a.json();console.log(m),i({open:!0,message:"Suất chiếu phim đã được tạo thành công!",severity:"success"})}catch(a){console.error(a),i({open:!0,message:"Có lỗi xảy ra khi tạo suất chiếu!",severity:"error"})}};return e.jsxs(j,{children:[e.jsxs(g,{children:[e.jsx(y,{title:e.jsx(p,{variant:"h2",children:"Mẫu tạo suất chiếu phim mới"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:d,children:[e.jsxs(b,{spacing:3,children:[e.jsx(r,{name:"film_name",label:"Tên phim",value:t.film_name,onChange:s,required:!0,fullWidth:!0}),e.jsx(r,{name:"room_name",label:"Tên phòng",value:t.room_name,onChange:s,required:!0,fullWidth:!0}),e.jsx(r,{name:"cinema_name",label:"Tên rạp",value:t.cinema_name,onChange:s,required:!0,fullWidth:!0}),e.jsx(r,{name:"show_date",label:"Ngày chiếu",type:"date",InputLabelProps:{shrink:!0},value:t.show_date,onChange:s,required:!0,fullWidth:!0}),e.jsx(r,{name:"show_time",label:"Giờ chiếu",type:"time",InputLabelProps:{shrink:!0},value:t.show_time,onChange:s,required:!0,fullWidth:!0})]}),e.jsx(x,{mt:3,display:"flex",justifyContent:"flex-end",children:e.jsx(f,{type:"submit",variant:"contained",color:"primary",children:"Tạo suất chiếu"})})]})})]}),e.jsx(_,{open:o.open,autoHideDuration:6e3,onClose:h,children:e.jsx(v,{onClose:h,severity:o.severity,children:o.message})})]})}function W(){return e.jsxs(e.Fragment,{children:[e.jsx(C,{children:e.jsxs("title",{children:[" ","Tạo suất chiếu | Trang quản trị website bán vé xem phim NHTT"]})}),e.jsx(S,{})]})}export{W as default};
